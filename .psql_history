\DT
\dt
\du
\dt
CREATE TABLE Puertos(pid:number, nombre:string, ciudad:string, region:string)INSERT INTO Puertos VALUES(1, Mejillones, Mejillones, II)
\dt
CREATE TABLE Puertos(pid:number, nombre:string, ciudad:string, region:string)
\dt
CREATE TABLE Barcos(patente string, pais string, nombre string)
\dt
CREATE TABLE Barcos(patente text, pais text, nombre text)
\dt
CREATE TABLE Barcos(patente varchar, pais varchar, nombre varchar)
\dt
CREATE TABLE Barcos(patente varchar, pais varchar, nombre varchar)CREATE TABLE Barcos(patente varchar, pais varchar, nombre varchar);
clearCREATE TABLE Barcos(patente varchar, pais varchar, nombre varchar);
clearCREATE TABLE Barcos(patente varchar, pais varchar, nombre varchar);
\dt
\dt
\dt
CREATE TABLE Barcos(patente varchar, pais varchar, nombre varchar);
INSTERT INTO Barcos VALUES(AA34, Chile, patito)
\dt
SELECT * FROM Barcos
\dt
\dt
select * from Barcos;
INSERT INTO Barcos VALUES('AA34', 'Chile', 'patito');
SELECT * FROM Barcos;
passwd;
\dt
\d Barcosa
\d Barcos
ALTER USER grupo115 ENCRYPTED PASSWORD beosbepa;
ALTER USER grupo115 ENCRYPTED PASSWORD 'beosbepa';
exit;
\q
\q
/q
\q
\d
\q
ls,;
l;
l;
ls;
list;
\c grupo115e2
\d
\l
\..
\q
ls
\q
\dt
SELECT * FROM barcos;
/dt/q
\q
\dt
\help
ls
\d
\q
\l
\c grupo115e2
\l
\dt
\COPY Barco from 'Barco.csv' DELIMITER ',' CSV HEADER;
CREATE TABLE Puertos(pid INT, nombre VARCHAR(100), ciudad VARCHAR(100), region VARCHAR(100))
\dt
;
\dt
SELECT (*) from puertos;
SELECT * FROM puertos;
DROP TABLE puertos;
\dt
CREATE TABLE Puertos(pid INT, nombre VARCHAR(100), ciudad VARCHAR(100), region VARCHAR(100), PRIMARY KEY(pid));
\dt
SELECT * FROM puertos;
\COPY puertos from 'Puertos.csv' DELIMITER ',' CSV HEADER;
\dt
SELECT * FROM puertos;
CREATE TABLE instalaciones(iid INT, tipo STRING, capacidad INT, PRIMARY KEY(iid));
CREATE TABLE instalaciones(iid INT, tipo TEXT, capacidad INT, PRIMARY KEY(iid));
\dt
select * from instalaciones;
\COPY instalaciones from 'Instalaciones.csv' DELIMITER ',' CSV HEADER;
select * from instalaciones;
CREATE TABLE puertosinstalaciones(iid INT, pid INT, FOREIGN KEY(iid) REFERENCES instalaciones(iid), FOREIGN KEY(ii) REFERENCES instalaciones(iid), PRIMARY KEY(iid));
CREATE TABLE puertosinstalaciones(iid INT, pid INT, FOREIGN KEY(iid) REFERENCES instalaciones(iid), FOREIGN KEY(pid) REFERENCES puertos(pid), PRIMARY KEY(iid));
\dt
\COPY puertosinstalaciones from 'PuertosInstalaciones.csv' DELIMITER ',' CSV HEADER;
select * from puertosinstalaciones;
CREATE TABLE cierres(cid INT, cierre TIMESTAMP, reapertura TIMESTAMP, PRIMARY KEY(cid));
\COPY cierres from 'Cierres.csv' DELIMITER ',' CSV HEADER;
CREATE TABLE cierreinstalacion(cid INT, iid INT, reapertura TIMESTAMP, PRIMARY KEY(cid));
DROP TABLE cierreinstalacion;
CREATE TABLE personal(rut VARCHAR(12), nombre VARCHAR(25), edad INT, sexo TEXT, PRIMARY KEY(rut));
\COPY personal from 'Personal.csv' DELIMITER ',' CSV HEADER;
\dt
CREATE TABLE cierreinstalacion(cid INT, iid INT, rut VARCHAR(12), FOREIGN KEY(cid) REFERENCES cierres(cid), FOREIGN KEY(iid) REFERENCES instalaciones(iid), FOREIGN KEY(rut) REFERENCES personal(rut), PRIMARY KEY(cid));
\dt
\COPY cierreinstalacion from 'CierreInstalacion.csv' DELIMITER ',' CSV HEADER;
CREATE TABLE jefeinstalacion(rut VARCHAR(12), iid INT, FOREIGN KEY(rut) REFERENCES personal(rut), FOREIGN KEY(iid) REFERENCES instalaciones(iid), PRIMARY KEY(rut));
\COPY jefeinstalacion from 'JefeInstalacion.csv' DELIMITER ',' CSV HEADER;
\COPY jefeinstalacion from 'JefeInstalacion.csv' DELIMITER ',' CSV HEADER;
DROP TABLE jefeinstalacion;
CREATE TABLE jefeinstalacion(iid INT, rut VARCHAR(12), FOREIGN KEY(rut) REFERENCES personal(rut), FOREIGN KEY(iid) REFERENCES instalaciones(iid), PRIMARY KEY(rut));
\COPY jefeinstalacion from 'JefeInstalacion.csv' DELIMITER ',' CSV HEADER;
\DTR
\dt
select * from cierreinstalacion;
select * from cierres;
CREATE TABLE personalinstalacion(rut VARCHAR(12), iid INT, FOREIGN KEY(rut) REFERENCES personal(rut), FOREIGN KEY(iid) REFERENCES instalaciones(iid), PRIMARY KEY(rut));
\COPY personalinstalacion from 'PersonalInstalacion.csv' DELIMITER ',' CSV HEADER;
\dt
CREATE TABLE barco(patente TEXT, pais TEXT, nombre TEXT, PRIMARY KEY(patente));
\COPY barco from 'Barco.csv' DELIMITER ',' CSV HEADER;
SHOW server_encoding;
\COPY barco from 'Barco.csv' DELIMITER ',' CSV HEADER encoding 'latin-1';
\COPY barco from 'Barco.csv' DELIMITER ',' CSV HEADER;
\dt
select * form barco;
select * from barco;
DROP TABLE barco;
\dt
select * from cierreinstalacion;
select * from cierres;
select * from instalaciones;
select * from jefeinstalacion;
select * from personal;
select * from personalinstalacion;
select * from puertos;
select * from puertosinstalaciones;
CREATE TABLE barco(patente TEXT, pais TEXT, nombre VARCHAR(25), PRIMARY KEY(patente));
\COPY barco from 'Barco.csv' DELIMITER ',' CSV HEADER;
select * from BARCO;
select * from BARCO;
CREATE TABLE permisos(peid INT, atraque TIMESTAMP, PRIMARY KEY(peid));
\COPY permisos from 'Permisos.csv' DELIMITER ',' CSV HEADER;
select * from permisos;
select * from permisos;
select * from barco;
\dt
DROP TABLE barco;
CREATE TABLE permisoscargadescarga(peid INT, descripcion TEXT, FOREIGN KEY(peid) REFERENCES permisos(peid), PRIMARY KEY(peid));
\COPY permisoscargadescarga from 'PermisosCargaDescarga.csv' DELIMITER ',' CSV HEADER;
select * from permisoscargadescarga;
CREATE TABLE barco(patente TEXT, pais TEXT, nombre TEXT, PRIMARY KEY(patente));
\COPY barco from 'Barco.csv' DELIMITER ',' CSV HEADER;
select * from barco;
\dt
CREATE TABLE permisosastillero(peid INT, salida TIMESTAMP, FOREIGN KEY(peid) REFERENCES permisos(peid), PRIMARY KEY(peid));
\COPY permisosastillero from 'PermisosAstillero.csv' DELIMITER ',' CSV HEADER;
select * from permisosastillero;
\dt
CREATE TABLE permisootorgado(peid INT, iid INT, patente TEXT, FOREIGN KEY(peid) REFERENCES permisos(peid), FOREIGN KEY(iid) REFERENCES instalaciones(iid), FOREIGN KEY(patente) REFERENCES barco(patente) PRIMARY KEY(peid));
CREATE TABLE permisootorgado(peid INT, iid INT, patente TEXT, FOREIGN KEY(peid) REFERENCES permisos(peid), FOREIGN KEY(iid) REFERENCES instalaciones(iid), FOREIGN KEY(patente) REFERENCES barco(patente), PRIMARY KEY(peid));
\COPY permisootorgado from 'PermisoOtorgado.csv' DELIMITER ',' CSV HEADER;
select * from permisootorgado;
\dt
select * from permisootorgado;
\q
\c grupo115e2
\dt
select * from puertos;
select nombre, ciudad from puertos WHERE upper(nombre) LIKE %quintero%;
select nombre, ciudad from puertos WHERE upper(nombre) LIKE '%quintero%';
select nombre, ciudad from puertos WHERE upper(nombre) LIKE 'upper(%quintero%)';
select nombre, ciudad from puertos WHERE upper(nombre) LIKE '%upper(quintero)%';
select nombre, ciudad from puertos WHERE upper(nombre) = upper("quintero");
select nombre, ciudad from puertos WHERE upper(nombre) = upper(quintero);
select nombre, ciudad from puertos WHERE upper(nombre) = upper('quintero');
select nombre, ciudad from puertos WHERE upper(nombre) = upper('quinTEro');
\Q
\q
\c grupo115e2
SELECT personal.rut, personal.nombre, personal.edad, personal.sexo FROM puertos INNER JOIN puertosinstalaciones INNER JOIN instalaciones INNER JOIN jefeinstalacion INNER JOIN personal ON puertos.pid = puertosinstalaciones.pid AND puertosinstalaciones.iid = instalaciones.iid AND jefeinstalacion.iid = instalaciones.iid AND personal.rut = jefeinstalacion.rut WHERE puertos.nombre LIKE '%$puerto%';
SELECT personal.rut, personal.nombre, personal.edad, personal.sexo FROM puertos, puertosinstalaciones,instalaciones,jefeinstalacion,personalWhere puertos.pid = puertosinstalaciones.pidAND puertosinstalaciones.iid = instalaciones.iidAND jefeinstalacion.iid = instalaciones.iidAND personal.rut = jefeinstalacion.rutand puertos.nombre LIKE '%Mejillones%';
\q
\c grupo115e2
\dt
SELECT personal.rut, personal.nombre, personal.edad, personal.sexo FROM puertos, puertosinstalaciones,instalaciones,jefeinstalacion,personalWhere puertos.pid = puertosinstalaciones.pidAND puertosinstalaciones.iid = instalaciones.iidAND jefeinstalacion.iid = instalaciones.iidAND personal.rut = jefeinstalacion.rutand puertos.nombre LIKE '%Mejillones%';
SELECT nombre, cantidad FROM (SELECT puertos.nombre, COUNT (instalaciones.iid) AS cantidad FROM puertos, puertosinstalaciones, instalaciones WHERE puertos.pid = puertosinstalaciones.pid AND puertosinstalaciones.iid = instalaciones.iid AND tipo = 'astillero' GROUP BY puertos.nombre) WHERE cantidad >= 1;
SELECT nombre, cantidad FROM (SELECT puertos.nombre, COUNT (instalaciones.iid) AS cantidad FROM puertos, puertosinstalaciones, instalaciones WHERE puertos.pid = puertosinstalaciones.pid AND puertosinstalaciones.iid = instalaciones.iid AND tipo = 'astillero' GROUP BY puertos.nombre) AS Tabla WHERE Tabla.cantidad >= 1;
SELECT nombre, cantidad FROM (SELECT puertos.nombre, COUNT (instalaciones.iid) AS cantidad FROM puertos, puertosinstalaciones, instalaciones WHERE puertos.pid = puertosinstalaciones.pid AND puertosinstalaciones.iid = instalaciones.iid AND tipo = 'astillero' GROUP BY puertos.nombre) AS Tabla WHERE Tabla.cantidad >= 1;
SELECT nombre, cantidad FROM (SELECT puertos.nombre, COUNT (instalaciones.iid) AS cantidad FROM puertos, puertosinstalaciones, instalaciones WHERE puertos.pid = puertosinstalaciones.pid AND puertosinstalaciones.iid = instalaciones.iid AND tipo = 'astillero' GROUP BY puertos.nombre) AS Tabla WHERE Tabla.cantidad >= 1;
SELECT puertos,noombre, AVG(edad) AS edad_promedio FROM personal, personalinstalacion, instalaciones, puertosinstalaciones, puertos WHERE personal.rut = personalinstalacion.rut AND personalistalacion.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid WHERE puertos.nombre = 'Arica' GROUP BY puertos.nombre;
SELECT puertos,noombre, AVG(edad) AS edad_promedio FROM personal, personalinstalacion, instalaciones, puertosinstalaciones, puertos WHERE personal.rut = personalinstalacion.rut AND personalistalacion.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND puertos.nombre = 'Arica' GROUP BY puertos.nombre;
SELECT puertos, nombre, AVG(edad) AS edad_promedio FROM personal, personalinstalacion, instalaciones, puertosinstalaciones, puertos WHERE personal.rut = personalinstalacion.rut AND personalistalacion.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND puertos.nombre = 'Arica' GROUP BY puertos.nombre;
SELECT puertos.nombre, AVG(edad) AS edad_promedio FROM personal, personalinstalacion, instalaciones, puertosinstalaciones, puertos WHERE personal.rut = personalinstalacion.rut AND personalistalacion.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND puertos.nombre = 'Arica' GROUP BY puertos.nombre;
SELECT puertos.nombre, AVG(edad) AS edad_promedio FROM personal, personalinstalacion, instalaciones, puertosinstalaciones, puertos WHERE personal.rut = personalinstalacion.rut AND personalinstalacion.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND puertos.nombre = 'Arica' GROUP BY puertos.nombre;
SELECT nombre, MAX(cantidad) as cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS cantidad FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque ;
\q
SELECT nombre, MAX(cantidad) as cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS cantidad FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-32' GROUP BY puertos.pid) AS tabla;
\dt
\c grupo115e2
SELECT nombre, MAX(cantidad) as cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS cantidad FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-32' GROUP BY puertos.pid) AS tabla;
SELECT nombre, MAX(cantidad) as cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS cantidad FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid) AS tabla;
SELECT tabla.nombre, MAX(tabla.cantidad) as cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS cantidad FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid) AS tabla;
SELECT nombre, MAX(cantidad) as cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS cantidad FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid);
SELECT nombre, MAX(cantidad) as cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS cantidad FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid) AS tabla;
SELECT tabla.nombre, MAX(tabla.cantidad) as cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS cantidad FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid) AS tabla;
SELECT tabla.nombre, MAX(tabla.cantidad) as cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS cantidad FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid) AS tabla WHERE tabla.nombre = tabla.nombre;
SELECT tabla.nombre, MAX(tabla.cantidad) as cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS cantidad FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid) AS tabla WHERE tabla.cantidad > 0;
SELECT nombre, MAX(barcos_recibidos) AS cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS baros_recibidos FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid) AS tabla WHERE tabla.cantidad > 0;
SELECT nombre, MAX(barcos_recibidos) AS cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS barcos_recibidos FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid) AS tabla WHERE tabla.cantidad > 0;
SELECT nombre, MAX(barcos_recibidos) AS cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS barcos_recibidos FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid) AS tabla WHERE tabla.barcos_recibidos > 0;
SELECT nombre, MAX(barcos_recibidos) AS cantidad FROM (SELECT puertos.nombre, COUNT(puertos.pid) AS barcos_recibidos FROM permisos, permisootorgado, instalaciones, puertosinstalaciones, puertos WHERE permisos.peid = permisootorgado.peid AND permisootorgado.iid = instalaciones.iid AND instalaciones.iid = puertosinstalaciones.iid AND puertosinstalaciones.pid = puertos.pid AND atraque >= '2019-08-01' AND atraque < '2019-08-31' GROUP BY puertos.pid) AS tabla GROUP BY tabla.nombre;
SELECT * FROM permisos WHERE atraque >= '2019-08' AND atraque < '2019-09';
SELECT * FROM permisos WHERE atraque >= '2019-08-01' AND atraque < '2019-09-01';
\q
\dt
\q
\dt
\help
\c
\l
\c grupo155e2
\c grupo115e2
\dt
q
\q
